{
  "timestamp": "2025-10-11 20:38:41",
  "total_tests": 14,
  "passed_tests": 6,
  "failed_tests": 8,
  "results": [
    {
      "name": "Startup Rebalancing (100% SOL)",
      "passed": true,
      "details": {
        "actions": [
          "STARTUP_REBALANCE: Converting $900.00 SOL to USDC (100% SOL -> 10% SOL, 90% USDC)"
        ],
        "startup_attempted": true
      }
    },
    {
      "name": "USDC Depletion Crisis",
      "passed": false,
      "details": {
        "actions": [
          "CRITICAL: USDC 5.0% < emergency 15.0% + positions high 85.0% - LIQUIDATE $150.00 positions for USDC",
          "INFO: Position exposure 85.0% > 60.0% (copybot should handle)"
        ]
      }
    },
    {
      "name": "SOL Critical Low",
      "passed": false,
      "details": {
        "actions": [
          "SOL_LOW: 3.0% < 7.0% target"
        ]
      }
    },
    {
      "name": "SOL Too High Rebalancing",
      "passed": false,
      "details": {
        "actions": [
          "SOL_HIGH: 25.0% > 20.0% limit"
        ]
      }
    },
    {
      "name": "Cooldown Mechanism",
      "passed": true,
      "details": {
        "first_actions": [
          "STARTUP_REBALANCE: Converting $900.00 SOL to USDC (100% SOL -> 10% SOL, 90% USDC)"
        ],
        "second_actions": []
      }
    },
    {
      "name": "Insufficient Funds",
      "passed": true,
      "details": {
        "actions": []
      }
    },
    {
      "name": "Dust Conversion",
      "passed": false,
      "details": {
        "conversion_success": true,
        "dust_removed": false,
        "sol_increased": false,
        "current_positions": {
          "MOCK00000000000000000000000000000000000000": 0.5,
          "MOCK01000000000000000000000000000000000000": 0.75,
          "MOCK02000000000000000000000000000000000000": 1.0
        }
      }
    },
    {
      "name": "Realized Gains Harvesting (5% Increment)",
      "passed": false,
      "details": {
        "transfers_recorded": false,
        "gains_updated": false,
        "realized_gains_total": 0.0,
        "external_transfers_count": 0
      }
    },
    {
      "name": "Below Threshold Gains",
      "passed": true,
      "details": {
        "no_harvesting": true,
        "no_transfers": true,
        "initial_gains": 0.0,
        "final_gains": 0.0
      }
    },
    {
      "name": "External Wallet Transfers (Paper Trading Mode)",
      "passed": false,
      "details": {
        "transfers_logged": false,
        "transfer_details_valid": true,
        "transfer_count": 0,
        "transfers": []
      }
    },
    {
      "name": "Dust Conversion with Excluded Tokens",
      "passed": false,
      "error": "UNIQUE constraint failed: paper_portfolio.token_address"
    },
    {
      "name": "Fresh Start Complete Flow",
      "passed": false,
      "details": {
        "no_initial_harvesting": true,
        "gains_harvested": false,
        "realized_gains_updated": false,
        "external_transfers": 0,
        "realized_gains_total": 0.0
      }
    },
    {
      "name": "Agent Priority and Coordination",
      "passed": true,
      "details": {
        "rebalancing_triggered": true,
        "harvesting_no_action": true,
        "expected_allocation": true,
        "final_state": {
          "sol_usd": 100.0,
          "usdc_usd": 900.0,
          "positions_usd": 0.0,
          "total_value": 1000.0,
          "sol_pct": 0.1,
          "usdc_pct": 0.9,
          "positions_pct": 0.0,
          "positions": {}
        }
      }
    },
    {
      "name": "Cooldown Interaction",
      "passed": true,
      "details": {
        "first_rebalancing_worked": true,
        "second_rebalancing_blocked": true,
        "harvesting_worked": true,
        "rebalancing_in_cooldown": true,
        "rebalancing_actions1": [
          "STARTUP_REBALANCE: Converting $900.00 SOL to USDC (100% SOL -> 10% SOL, 90% USDC)"
        ],
        "rebalancing_actions2": []
      }
    }
  ]
}